"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[313],{91094:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(9950),s=n(52346),i=n(14857),a=n(59254),l=n(97497);const o=(0,a.Ay)(s.A)((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,s="filled"===n.variant,i="outlined"===n.variant,a="soft"===n.variant,o={..."default"===n.color&&{...s&&{color:r?t.palette.common.white:t.palette.grey[800],backgroundColor:t.palette.text.primary},...i&&{backgroundColor:"transparent",color:t.palette.text.primary,border:"2px solid ".concat(t.palette.text.primary)},...a&&{color:t.palette.text.secondary,backgroundColor:(0,l.X4)(t.palette.grey[500],.16)}}},c={..."default"!==n.color&&{...s&&{color:t.palette[n.color].contrastText,backgroundColor:t.palette[n.color].main},...i&&{backgroundColor:"transparent",color:t.palette[n.color].main,border:"2px solid ".concat(t.palette[n.color].main)},...a&&{color:t.palette[n.color][r?"dark":"light"],backgroundColor:(0,l.X4)(t.palette[n.color].main,.16)}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",textTransform:"capitalize",padding:t.spacing(0,.75),fontSize:t.typography.pxToRem(12),fontWeight:t.typography.fontWeightBold,transition:t.transitions.create("all",{duration:t.transitions.duration.shorter}),...o,...c}}));var c=n(44414);const d=(0,r.forwardRef)(((e,t)=>{let{children:n,color:r="default",variant:a="soft",startIcon:l,endIcon:d,sx:h,...x}=e;const u=(0,i.A)(),m={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,c.jsxs)(o,{ref:t,component:"span",ownerState:{color:r,variant:a},sx:{...l&&{pl:.75},...d&&{pr:.75},...h},theme:u,...x,children:[l&&(0,c.jsxs)(s.A,{sx:{mr:.75,...m},children:[" ",l," "]}),n,d&&(0,c.jsxs)(s.A,{sx:{ml:.75,...m},children:[" ",d," "]})]})}))},35161:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(98623),s=n(93230),i=n(87233),a=n(44414);function l(){return(0,a.jsxs)(s.A,{direction:"row",spacing:2,sx:{display:"flex"},children:[(0,a.jsx)(r.A,{}),(0,a.jsx)(i.A,{children:"\ub85c\ub529\uc911..."})]})}},42738:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(68605),s=n(10371),i=n(44414);function a(e){let{emptyRows:t,height:n,numCols:a}=e;return t?(0,i.jsx)(s.A,{sx:{...n&&{height:n*t}},children:(0,i.jsx)(r.A,{colSpan:a})}):null}},68502:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(35661),s=n(68605),i=n(10371),a=n(87233),l=n(44414);function o(e){let{query:t,numCols:n}=e;return(0,l.jsx)(i.A,{children:(0,l.jsx)(s.A,{align:"center",colSpan:n,sx:{py:3},children:(0,l.jsxs)(r.A,{sx:{textAlign:"center"},children:[(0,l.jsx)(a.A,{variant:"h6",paragraph:!0,children:"Not found"}),(0,l.jsxs)(a.A,{variant:"body2",children:["No results found for \xa0",(0,l.jsxs)("strong",{children:['"',t,'"']}),".",(0,l.jsx)("br",{})," Try checking for typos or using complete words."]})]})})})}},67313:(e,t,n)=>{n.r(t),n.d(t,{default:()=>de});var r=n(17814),s=n(9950),i=n(2683),a=n(19808),l=n(93230),o=n(397),c=n(22057),d=n(64661),h=n(97452),x=n(87233),u=n(59289),m=n(42738),p=n(68502),g=n(57073),A=n(46483),j=n(2660),f=n(34977),v=n(53065),b=n(16255),y=n(44414);function C(e){let{numSelected:t,filterName:n,onFilterName:r}=e;return(0,y.jsxs)(f.A,{sx:{height:96,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3),...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?(0,y.jsxs)(x.A,{component:"div",variant:"subtitle1",children:[t," selected"]}):(0,y.jsx)(j.A,{value:n,onChange:r,placeholder:"Search sender...",startAdornment:(0,y.jsx)(A.A,{position:"start",children:(0,y.jsx)(b.A,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),t>0?(0,y.jsx)(v.A,{title:"Delete",children:(0,y.jsx)(g.A,{children:(0,y.jsx)(b.A,{icon:"eva:trash-2-fill"})})}):(0,y.jsx)(v.A,{title:"Filter list",children:(0,y.jsx)(g.A,{children:(0,y.jsx)(b.A,{icon:"ic:round-filter-list"})})})]})}var w=n(62854),k=n(67535),S=n(96319),N=n(96583),E=n(76601),R=n(79329),I=n(40033),W=n(72145),F=n(66059),q=n(27987),P=n(40736),L=n(14341),D=n(46589),z=n(15441),O=n(7086),T=n(51778),U=n(52206);function B(e,t){const n=(0,z.jE)(),r=(0,O.I)({queryKey:["message",e],queryFn:()=>(0,U.WP)(e),staleTime:6e4}),s=(0,T.n)({mutationFn:e=>(0,U.PU)(e),onSuccess:()=>{n.invalidateQueries(["message"])},onError:console.error}),i=(0,T.n)({mutationFn:e=>(0,U.nc)(e),onSuccess:()=>{n.invalidateQueries(["message"])},onError:console.error}),a=(0,T.n)({mutationFn:e=>(0,U.RC)(e),onSuccess:()=>{n.invalidateQueries(["message"])},onError:console.error});return{getList:r,insertRecord:s,updateRecord:i,deleteRecord:a}}var M=n(70414),Q=n(81418);function V(){const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)({dstEmail:"",content:""}),i=sessionStorage.getItem("sessionEmail"),a=(0,D.A)((e=>e.breakpoints.up("sm"))),{getList:{data:o}}=(0,M.A)(),{insertRecord:c}=B(),{insertRecord:d}=(0,Q.A)(),h=()=>{t(!1),r({dstEmail:"",content:""})},u=e=>{r({...n,[e.target.name]:e.target.value})};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k.A,{variant:"contained",color:"inherit",startIcon:(0,y.jsx)(b.A,{icon:"eva:plus-fill"}),onClick:()=>{t(!0)},children:"New Message"}),(0,y.jsxs)(N.A,{open:e,onClose:h,children:[(0,y.jsx)(I.A,{children:(0,y.jsx)(x.A,{sx:{fontWeight:"bold",fontSize:18},children:"\uc2e0\uaddc \uba54\uc138\uc9c0"})}),(0,y.jsx)(g.A,{"aria-label":"close",onClick:h,sx:{position:"absolute",right:8,top:8},children:(0,y.jsx)(S.A,{})}),(0,y.jsx)(R.A,{dividers:!0,children:(0,y.jsxs)(l.A,{spacing:2,alignItems:"center",sx:{width:a?"40ch":"auto"},children:[(0,y.jsxs)(W.A,{fullWidth:!0,children:[(0,y.jsx)(F.A,{id:"dstEmail",children:"\uc218\uc2e0"}),(0,y.jsx)(P.A,{required:!0,margin:"dense",name:"dstEmail",label:"\uc218\uc2e0\uc790",id:"dstEmail",defaultValue:n.dstEmail,onChange:u,children:o&&o.map((e=>(0,y.jsx)(q.A,{value:e.email,alignItems:"center",children:(0,y.jsxs)(l.A,{spacing:2,direction:"row",alignItems:"center",children:[(0,y.jsx)(w.A,{alt:e.displayName,src:e.avatarUrl}),(0,y.jsx)(x.A,{children:e.displayName})]})},e.uid)))})]}),(0,y.jsx)(L.A,{required:!0,margin:"dense",id:"content",multiline:!0,name:"content",label:"\uba54\uc138\uc9c0",type:"text",fullWidth:!0,defaultValue:n.content,onChange:u})]})}),(0,y.jsx)(E.A,{children:(0,y.jsx)(k.A,{onClick:()=>{const e=o.filter((e=>e.email===n.dstEmail))[0],t=o.filter((e=>e.email===i))[0],r={content:n.content,srcEmail:t.email,srcName:t.displayName,srcAvatar:t.avatarUrl,dstEmail:e.email,dstName:e.displayName,dstAvatar:e.avatarUrl};c.mutate(r);const s={email:e.email,type:"\uba54\uc138\uc9c0",description:"\uc2e0\uaddc \uba54\uc138\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4."};d.mutate(s),h()},variant:"contained",children:"\ub4f1\ub85d"})})]})]})}var K=n(52346),X=n(51496),H=n(68605),G=n(24965),J=n(10371),Y=n(66065);const Z={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function $(e){let{order:t,orderBy:n,rowCount:r,headLabel:s,numSelected:i,onRequestSort:a,onSelectAllClick:l}=e;return(0,y.jsx)(G.A,{children:(0,y.jsxs)(J.A,{children:[(0,y.jsx)(H.A,{padding:"checkbox",children:(0,y.jsx)(X.A,{indeterminate:i>0&&i<r,checked:r>0&&i===r,onChange:l})}),s.map((e=>{return(0,y.jsx)(H.A,{align:e.align||"left",sortDirection:n===e.id&&t,sx:{width:e.width,minWidth:e.minWidth},children:(0,y.jsxs)(Y.A,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(r=e.id,e=>{a(e,r)}),children:[(0,y.jsx)(x.A,{variant:"subtitle2",children:e.label}),n===e.id?(0,y.jsx)(K.A,{sx:{...Z},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))]})})}var _=n(11001),ee=n(30358);function te(e){let{message:t}=e;const[n,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)(""),o=(0,D.A)((e=>e.breakpoints.up("sm"))),{insertRecord:c,updateRecord:d}=B(),{refetchNoti:h}=(0,Q.A)(t.dstEmail),u=()=>{a(""),r(!1),d.mutate({...t,status:"\uc77d\uc74c"}),h()};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ee.A,{href:"#",sx:{color:"inherit",textDecoration:"none","&:hover":{cursor:"pointer",textDecoration:"underline"}},onClick:()=>{r(!0)},children:(0,y.jsx)(x.A,{children:t.content.length>50?t.content.substring(0,49)+"...":t.content})}),(0,y.jsxs)(N.A,{open:n,onClose:u,children:[(0,y.jsx)(I.A,{children:(0,y.jsx)(x.A,{sx:{fontWeight:"bold",fontSize:18},children:"\uc751\ub2f5 \uba54\uc138\uc9c0"})}),(0,y.jsx)(g.A,{"aria-label":"close",onClick:u,sx:{position:"absolute",right:8,top:8},children:(0,y.jsx)(S.A,{})}),(0,y.jsx)(R.A,{dividers:!0,children:(0,y.jsxs)(l.A,{spacing:2,alignItems:"center",sx:{width:o?"40ch":"auto"},children:[(0,y.jsxs)(l.A,{spacing:2,direction:"row",alignItems:"center",children:[(0,y.jsx)(w.A,{alt:t.srcName,src:t.srcAvatar}),(0,y.jsx)(x.A,{children:t.srcName})]}),(0,y.jsx)(L.A,{margin:"dense",multiline:!0,fullWidth:!0,label:"\ubc1b\uc740 \uba54\uc138\uc9c0",type:"text",value:t.content}),(0,y.jsx)(L.A,{required:!0,margin:"dense",id:"content",multiline:!0,name:"content",label:"\uc751\ub2f5 \uba54\uc138\uc9c0",type:"text",fullWidth:!0,defaultValue:i,onChange:e=>{a(e.target.value)}})]})}),(0,y.jsx)(E.A,{children:(0,y.jsx)(k.A,{onClick:e=>{e.preventDefault();const n={content:i,srcEmail:t.dstEmail,srcName:t.dstName,srcAvatar:t.dstAvatar,dstEmail:t.srcEmail,dstName:t.srcName,dstAvatar:t.srcAvatar};c.mutate(n),a(""),r(!1),d.mutate({...t,status:"\uc751\ub2f5"})},variant:"contained",children:"\uc751\ub2f5"})})]})]})}var ne=n(91094),re=n(58602);function se(e){let{message:t,selected:n,handleClick:r}=e;const{mid:i,status:a,srcName:o,srcAvatar:c,sentAt:d}=t,[h,u]=(0,s.useState)(null),{updateRecord:m,deleteRecord:p}=B(),A=()=>{u(null)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(J.A,{hover:!0,tabIndex:-1,role:"checkbox",selected:n,children:[(0,y.jsx)(H.A,{padding:"checkbox",children:(0,y.jsx)(X.A,{disableRipple:!0,checked:n,onChange:r})}),(0,y.jsx)(H.A,{component:"th",scope:"row",padding:"none",children:(0,y.jsxs)(l.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,y.jsx)(w.A,{alt:o,src:c}),(0,y.jsx)(x.A,{variant:"body2",noWrap:!0,children:o})]})}),(0,y.jsx)(H.A,{children:(0,y.jsx)(x.A,{variant:"body2",children:(0,y.jsx)(te,{message:t})})}),(0,y.jsx)(H.A,{children:(0,y.jsx)(ne.A,{color:"\uc77d\uc74c"===a?"primary":"\uc2e0\uaddc"===a?"error":"success",children:a})}),(0,y.jsx)(H.A,{children:(0,y.jsx)(x.A,{variant:"body2",children:(0,re.n4)(d,"ko")})}),(0,y.jsx)(H.A,{align:"right",children:(0,y.jsx)(g.A,{onClick:e=>{u(e.currentTarget)},children:(0,y.jsx)(b.A,{icon:"eva:more-vertical-fill"})})})]},i),(0,y.jsxs)(_.Ay,{open:!!h,anchorEl:h,onClose:A,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{width:140},children:[(0,y.jsxs)(q.A,{onClick:()=>{const e={...t,status:"\uc77d\uc74c"};m.mutate(e),A()},children:[(0,y.jsx)(b.A,{icon:"ic:outline-mark-chat-read",sx:{mr:2}}),"\uc77d\uc74c"]}),(0,y.jsxs)(q.A,{onClick:()=>{p.mutate(i),A()},sx:{color:"error.main"},children:[(0,y.jsx)(b.A,{icon:"eva:trash-2-outline",sx:{mr:2}}),"\uc0ad\uc81c"]})]})]})}var ie=n(35161);function ae(e,t,n){return e?Math.max(0,(1+e)*t-n):0}function le(e,t,n){return null===e[n]?1:null===t[n]||t[n]<e[n]?-1:t[n]>e[n]?1:0}function oe(e,t){return"desc"===e?(e,n)=>le(e,n,t):(e,n)=>-le(e,n,t)}function ce(){const e=sessionStorage.getItem("sessionEmail"),[t,n]=(0,s.useState)(0),[r,g]=(0,s.useState)("asc"),[A,j]=(0,s.useState)([]),[f,v]=(0,s.useState)("name"),[b,w]=(0,s.useState)(""),[k,S]=(0,s.useState)(5),{getList:{isLoading:N,data:E}}=B(e),{notifications:R,updateRecord:I}=(0,Q.A)(e),W=E&&function(e){let{inputData:t,comparator:n,filterName:r}=e;const s=t.map(((e,t)=>[e,t]));return s.sort(((e,t)=>{const r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=s.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.srcName.toLowerCase().indexOf(r.toLowerCase())))),t}({inputData:E,comparator:oe(r,f),filterName:b}),F=E&&!W.length&&!!b;return(0,s.useEffect)((()=>{R&&R.forEach((e=>{"\uba54\uc138\uc9c0"===e.type&&"\uc2e0\uaddc"===e.status&&I.mutate({...e,status:"\uc77d\uc74c"})}))}),[R]),(0,y.jsxs)(a.A,{maxWidth:"xl",children:[(0,y.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,y.jsx)(x.A,{variant:"h4",children:"\uba54\uc138\uc9c0"}),(0,y.jsx)(V,{})]}),N&&(0,y.jsx)(ie.A,{}),E&&(0,y.jsxs)(i.A,{children:[(0,y.jsx)(C,{numSelected:A.length,filterName:b,onFilterName:e=>{n(0),w(e.target.value)}}),(0,y.jsx)(u.A,{children:(0,y.jsx)(d.A,{sx:{overflow:"unset"},children:(0,y.jsxs)(o.A,{sx:{minWidth:800},children:[(0,y.jsx)($,{order:r,orderBy:f,rowCount:E.length,numSelected:A.length,onRequestSort:(e,t)=>{""!==t&&(g(f===t&&"asc"===r?"desc":"asc"),v(t))},onSelectAllClick:e=>{if(e.target.checked){const e=E.map((e=>e.srcName));j(e)}else j([])},headLabel:[{id:"srcName",label:"\ubcf4\ub0b8\uc774"},{id:"content",label:"\ub0b4\uc6a9"},{id:"status",label:"\uc0c1\ud0dc"},{id:"registeredAt",label:"\ubc1c\uc1a1"},{id:""}]}),(0,y.jsxs)(c.A,{children:[W.slice(t*k,t*k+k).map((e=>(0,y.jsx)(se,{message:e,selected:-1!==A.indexOf(e.name),handleClick:t=>((e,t)=>{const n=A.indexOf(t);let r=[];-1===n?r=r.concat(A,t):0===n?r=r.concat(A.slice(1)):n===A.length-1?r=r.concat(A.slice(0,-1)):n>0&&(r=r.concat(A.slice(0,n),A.slice(n+1))),j(r)})(0,e.name)}))),(0,y.jsx)(m.A,{height:70,numCols:5,emptyRows:ae(t,k,E.length)}),F&&(0,y.jsx)(p.A,{query:b})]})]})})}),(0,y.jsx)(h.A,{page:t,component:"div",count:E.length,rowsPerPage:k,onPageChange:(e,t)=>{n(t)},rowsPerPageOptions:[5,10,25],onRowsPerPageChange:e=>{n(0),S(parseInt(e.target.value,10))}})]})]})}function de(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.mg,{children:(0,y.jsx)("title",{children:" Message | CK React World "})}),(0,y.jsx)(ce,{})]})}}}]);