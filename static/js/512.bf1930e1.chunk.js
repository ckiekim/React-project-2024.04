"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[512],{5161:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(6639),o=i(3230),s=i(2053),r=i(4414);function a(){return(0,r.jsxs)(o.A,{direction:"row",spacing:2,sx:{display:"flex"},children:[(0,r.jsx)(n.A,{}),(0,r.jsx)(s.A,{children:"\ub85c\ub529\uc911..."})]})}},2512:(e,t,i)=>{i.r(t),i.d(t,{default:()=>D});var n=i(510),o=i(9808),s=i(8094),r=i(3230),a=i(2053),l=i(5441),c=i(7086),d=i(1778),h=i(7465);function u(e){const t=(0,l.jE)(),i=(0,c.I)({queryKey:["blogs",e],queryFn:e=>(0,h.XI)(e),staleTime:3e5}),n=(0,c.I)({queryKey:["blogs"],queryFn:h.Zt,staleTime:3e5}),o=(0,d.n)({mutationFn:e=>(0,h.sN)(e),onSuccess:()=>{t.invalidateQueries(["blogs"])},onError:console.error}),s=(0,d.n)({mutationFn:e=>(0,h.c5)(e),onSuccess:()=>{t.invalidateQueries(["blogs"])},onError:console.error}),r=(0,d.n)({mutationFn:e=>(0,h.cc)(e),onSuccess:()=>{t.invalidateQueries(["blogs"])},onError:console.error});return{getRecord:i,getList:n,insertRecord:o,updateRecord:s,deleteRecord:r}}var x=i(414),p=i(9950),m=i(7497),j=i(1413),g=i(6491),A=i(8089),v=i(6080),b=i(8602),f=i(628),w=i(6255),y=i(4414);const k=(0,p.forwardRef)(((e,t)=>{let{src:i,sx:n,...o}=e;return(0,y.jsx)(g.A,{component:"span",className:"svg-color",ref:t,sx:{width:24,height:24,display:"inline-block",bgcolor:"currentColor",mask:"url(".concat(i,") no-repeat center / contain"),WebkitMask:"url(".concat(i,") no-repeat center / contain"),...n},...o})}));function C(e){let{post:t,index:i}=e;const[n,o]=(0,p.useState)(t.comment),[l,c]=(0,p.useState)(t.view),[d,h]=(0,p.useState)(t.share),{cover:x,title:C,author:I,createdAt:S}=t,{updateRecord:R}=u(),W=0===i,F=1===i||2===i,q=()=>{R.mutate({...t,view:l+1}),c(l+1)},N=(0,y.jsx)(j.A,{src:I.avatarUrl,alt:I.displayName,sx:{zIndex:9,width:32,height:32,position:"absolute",left:e=>e.spacing(3),bottom:e=>e.spacing(-2),...(W||F)&&{zIndex:9,top:24,left:24,width:40,height:40}}}),L=(0,y.jsx)(v.A,{color:"inherit",variant:"subtitle2",underline:"hover",sx:{height:44,overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",...W&&{typography:"h5",height:60},...(W||F)&&{color:"common.white"}},onClick:q,children:C}),z=(0,y.jsxs)(r.A,{direction:"row",flexWrap:"wrap",spacing:1.5,justifyContent:"flex-end",sx:{mt:3,color:"text.disabled"},alignItems:"center",children:[(0,y.jsx)(r.A,{direction:"row",sx:{...(W||F)&&{opacity:.48,color:"common.white"}},children:(0,y.jsxs)(v.A,{onClick:()=>{R.mutate({...t,comment:n+1,view:l+1}),o(n+1),c(l+1)},color:"inherit",underline:"none",children:[(0,y.jsx)(w.A,{width:16,icon:"eva:message-circle-fill",sx:{mr:.5}}),(0,y.jsx)(a.A,{variant:"caption",children:(0,f.Rn)(n)})]})},"0"),(0,y.jsx)(r.A,{direction:"row",sx:{...(W||F)&&{opacity:.48,color:"common.white"}},children:(0,y.jsxs)(v.A,{onClick:q,color:"inherit",underline:"none",children:[(0,y.jsx)(w.A,{width:16,icon:"eva:eye-fill",sx:{mr:.5}}),(0,y.jsx)(a.A,{variant:"caption",children:(0,f.Rn)(l)})]})},"1"),(0,y.jsx)(r.A,{direction:"row",sx:{...(W||F)&&{opacity:.48,color:"common.white"}},children:(0,y.jsxs)(v.A,{onClick:()=>{R.mutate({...t,share:d+1,view:l+1}),h(d+1),c(l+1)},color:"inherit",underline:"none",children:[(0,y.jsx)(w.A,{width:16,icon:"eva:share-fill",sx:{mr:.5}}),(0,y.jsx)(a.A,{variant:"caption",children:(0,f.Rn)(d)})]})},"2")]}),E=(0,y.jsx)(g.A,{component:"img",src:x.startsWith("/")?"".concat("/ck-react-world").concat(x):x,alt:C,sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),P=(0,y.jsx)(a.A,{variant:"caption",component:"div",sx:{mb:2,color:"text.disabled",...(W||F)&&{opacity:.48,color:"common.white"}},children:(0,b.ts)(S)}),U=(0,y.jsx)(k,{color:"paper",src:"/assets/icons/shape-avatar.svg",sx:{width:80,height:36,zIndex:9,bottom:-15,position:"absolute",color:"background.paper",...(W||F)&&{display:"none"}}});return(0,y.jsx)(s.A,{xs:12,sm:W?12:6,md:W?6:3,children:(0,y.jsxs)(A.A,{children:[(0,y.jsxs)(g.A,{sx:{position:"relative",pt:"calc(100% * 3 / 4)",...(W||F)&&{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:e=>(0,m.X4)(e.palette.grey[900],.72)}},...W&&{pt:{xs:"calc(100% * 4 / 3)",sm:"calc(100% * 3 / 4.66)"}},"&:hover":{transform:"scale(1.05)"}},children:[U,N,E]}),(0,y.jsxs)(g.A,{sx:{p:e=>e.spacing(4,3,3,3),...(W||F)&&{width:1,bottom:0,position:"absolute"}},children:[P,L,z]})]})})}var I=i(4322),S=i(9925);function R(e){let{options:t,onSort:i}=e;return(0,y.jsx)(S.A,{select:!0,size:"small",value:"latest",onChange:i,children:t.map((e=>(0,y.jsx)(I.A,{value:e.value,children:e.label},e.value)))})}var W=i(9940),F=i(2023),q=i(2046);function N(e){let{posts:t}=e;return(0,y.jsx)(W.A,{sx:{width:280},autoHighlight:!0,popupIcon:null,slotProps:{paper:{sx:{width:320,["& .".concat(F.A.option)]:{typography:"body2"}}}},options:t,getOptionLabel:e=>e.title,isOptionEqualToValue:(e,t)=>e.id===t.id,renderInput:e=>(0,y.jsx)(S.A,{...e,placeholder:"Search post...",InputProps:{...e.InputProps,startAdornment:(0,y.jsx)(q.A,{position:"start",children:(0,y.jsx)(w.A,{icon:"eva:search-fill",sx:{ml:1,width:20,height:20,color:"text.disabled"}})})}})})}var L=i(8002),z=i(5098),E=i(6319),P=i(3464),U=i(9739),V=i(8170),O=i(33),K=i(5333),Q=i(1592);function T(e){let{account:t}=e;const{uid:i,displayName:n,avatarUrl:o}=t,[s,l]=(0,p.useState)(!1),[c,d]=(0,p.useState)(),[h,x]=(0,p.useState)({author:{uid:i,displayName:n,avatarUrl:o},title:""}),m=()=>{l(!1),x({author:{uid:i,displayName:n,avatarUrl:o},title:""}),d()},{insertRecord:j}=u();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(z.A,{variant:"contained",color:"inherit",startIcon:(0,y.jsx)(w.A,{icon:"eva:plus-fill"}),onClick:()=>{l(!0)},children:"New Post"}),(0,y.jsxs)(P.A,{open:s,onClose:m,children:[(0,y.jsx)(O.A,{children:(0,y.jsx)(a.A,{sx:{fontWeight:"bold",fontSize:18},children:"\ud3ec\uc2a4\ud2b8 \ucd94\uac00"})}),(0,y.jsx)(K.A,{"aria-label":"close",onClick:m,sx:{position:"absolute",right:8,top:8},children:(0,y.jsx)(E.A,{})}),(0,y.jsx)(V.A,{dividers:!0,children:(0,y.jsxs)(r.A,{spacing:2,sx:{width:"40ch"},alignItems:"center",children:[c&&(0,y.jsx)("img",{src:h.cover,alt:"post",width:"80%"}),(0,y.jsx)(S.A,{disabled:!0,margin:"dense",label:"uid",fullWidth:!0,defaultValue:i}),(0,y.jsx)(S.A,{disabled:!0,margin:"dense",label:"\uc774\ub984",fullWidth:!0,defaultValue:n}),(0,y.jsx)(S.A,{autoFocus:!0,required:!0,margin:"dense",id:"title",name:"title",label:"\uc81c\ubaa9",type:"text",fullWidth:!0,defaultValue:h.title,onChange:e=>{x({...h,[e.target.name]:e.target.value})}}),(0,y.jsx)(L.G,{required:!0,margin:"dense",id:"photo",label:"\ud3ec\uc2a4\ud2b8 \uc0ac\uc9c4",value:c,name:"file",fullWidth:!0,onChange:e=>{d(e),(0,Q.V)(e).then((e=>x({...h,cover:e})))}})]})}),(0,y.jsx)(U.A,{children:(0,y.jsx)(z.A,{onClick:e=>{e.preventDefault(),j.mutate(h),m()},variant:"contained",children:"\ub4f1\ub85d"})})]})]})}var B=i(5161);function X(){const{getList:{isLoading:e,data:t}}=u(),{getRecord:{data:i}}=(0,x.A)({uid:sessionStorage.getItem("sessionUid")});return(0,y.jsxs)(o.A,{maxWidth:"xl",children:[(0,y.jsxs)(r.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,y.jsx)(a.A,{variant:"h4",children:"\ube14\ub85c\uadf8"}),i&&(0,y.jsx)(T,{account:i})]}),e&&(0,y.jsx)(B.A,{}),t&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(r.A,{mb:5,direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,y.jsx)(N,{posts:t}),(0,y.jsx)(R,{options:[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}]})]}),(0,y.jsx)(s.A,{container:!0,spacing:3,children:t.map(((e,t)=>(0,y.jsx)(C,{post:e,index:t},e.id)))})]})]})}function D(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.mg,{children:(0,y.jsx)("title",{children:" Blog | CK React World "})}),(0,y.jsx)(X,{})]})}}}]);